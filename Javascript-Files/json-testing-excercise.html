<html>
<head>
<script type="text/javascript">
var products = [
{"name":"1","url":"images/1.jpg","color":"Yellow","brand":"BRAND A","sold_out":"1"},
{"name":"2","url":"images/2.jpg","color":"Red","brand":"BRAND B","sold_out":"0"},
{"name":"3","url":"images/3.jpg","color":"Green","brand":"BRAND D","sold_out":"0"},
{"name":"4","url":"images/4.jpg","color":"Red","brand":"BRAND A","sold_out":"1"},
{"name":"5","url":"images/5.jpg","color":"Blue","brand":"BRAND B","sold_out":"0"},
{"name":"6","url":"images/6.jpg","color":"Green","brand":"BRAND C","sold_out":"0"},
{"name":"7","url":"images/7.jpg","color":"Red","brand":"BRAND C","sold_out":"1"},
{"name":"8","url":"images/8.jpg","color":"Blue","brand":"BRAND D","sold_out":"0"},
{"name":"9","url":"images/9.jpg","color":"Yellow","brand":"BRAND A","sold_out":"0"},
{"name":"10","url":"images/10.jpg","color":"Yellow","brand":"BRAND B","sold_out":"1"},
{"name":"11","url":"images/11.jpg","color":"Green","brand":"BRAND D","sold_out":"0"},
{"name":"12","url":"images/12.jpg","color":"Yellow","brand":"BRAND D","sold_out":"0"},
{"name":"13","url":"images/13.jpg","color":"Blue","brand":"BRAND A","sold_out":"0"},
{"name":"14","url":"images/14.jpg","color":"Blue","brand":"BRAND D","sold_out":"0"},
{"name":"15","url":"images/15.jpg","color":"Green","brand":"BRAND B","sold_out":"0"},
{"name":"16","url":"images/16.jpg","color":"Yellow","brand":"BRAND B","sold_out":"1"},
{"name":"17","url":"images/17.jpg","color":"Green","brand":"BRAND A","sold_out":"1"},
{"name":"18","url":"images/18.jpg","color":"Blue","brand":"BRAND D","sold_out":"1"},
{"name":"19","url":"images/19.jpg","color":"Green","brand":"BRAND C","sold_out":"0"},
{"name":"20","url":"images/20.jpg","color":"Yellow","brand":"BRAND A","sold_out":"0"}
];

	function clearInterface(){
		var divs = document.getElementsByName("image-grid-row");
		var div_len = divs.length;
		for(i=0;i<div_len;++i){
		  var nodes = divs[i].childNodes;
		  var nodes_len = nodes.length;
		  for(j=0;j<nodes_len;++j){
		    divs[i].removeChild(nodes[0]);
		   }
		  }
	 }

	function createInitialInterface(){
		createInterface1(products)
	}
	function createInterface1(sorted_array){
	  clearInterface();
	  var length = sorted_array.length;
	  var imgTag;
	  var div = document.getElementsByName("image-grid-row");
	  for(i=0;i<div.length;++i){
	   for(j=0;j<4;++j){
	     var imgTag = document.createElement("img");
	     var index = i*4+j;
	     imgTag.setAttribute("src",sorted_array[index].url);
	     imgTag.setAttribute("width","100px");
	     div[i].appendChild(imgTag);
	      }
	   }
	}


	function sortByProperty(t){
		var criteria = t.value;
		sortBySpecificProperty(criteria)
	}

	function callbackFunc(a,b,parameter){
		if(parameter == "name"){ /* integer comparison */
			if(parseInt(a[parameter]) == parseInt(b[parameter])) return 0;
			return (parseInt(a[parameter]) > parseInt(b[parameter])) ? 1 : -1;	
		}else{
			if(a[parameter] == b[parameter]) return 0;
			return (a[parameter] > b[parameter]) ? 1 : -1;	
		}	
	}

	function sortBySpecificProperty(property){
		clearInterface();
		var products_copy = products
		var sortedArray = products_copy.sort(function(x,y) {  return callbackFunc(x,y,property) })
		createInterface1(sortedArray);
	}

  </script>
  </head>
   <body onload="createInitialInterface()">
   	<div id="sort-box" align="center">
     	Sort Them By: 
	<select onchange="sortByProperty(this)">
	<option value="name">Select Sorting Criteria</option>
	<option value="sold_out">Availability</option>
	<option value="brand">Brand</option>
	<option value="color">Colour</option>
	<option value="name">Name</option>
	</select>
	</div>
	<div id="image-grid" align="center" width="500px">
 	<hr>
	 <div name="image-grid-row"></div>
	 <hr>
	 <div name="image-grid-row"></div>
	 <hr>
	 <div name="image-grid-row"></div>
	 <hr>
	 <div name="image-grid-row"></div>
	 <hr>
	 <div name="image-grid-row"></div>
	 <hr>
	</div>
   </body>
</html>

